<section>
<h2>Add a New Medical Provider</h2>

<form class="new-provider-form">
<div>
<label for="name">Name</label>
<input type="text" id="name" name="provider-name" />
</div>
<div>
<label for="location">Location</label>
<input type="text" id="location" name="location" />
</div>
<div>
<label for="specialty">Specialty</label>
<input type="text" id="specialty" name="specialty" />
</div>

<button type="submit" class="btn">Add Provider</button>

</form>



<!-- logic for add post-->

<script type="text/javascript">


async function newFormHandler(event) {
    event.preventDefault();

    console.log("hit async function");


    const name = document.querySelector('input[name="provider-name"]').value;
    console.log(name);


    const location = document.querySelector('input[name="location"]').value;
    console.log(location);


    const specialty = document.querySelector('input[name="specialty"]').value;
    console.log(specialty);

    
 
  

   
    const response = await fetch('/api/posts/', {
        method: 'POST',
        body: JSON.stringify({
          name,
          location,
          specialty
        }),
      

        headers: {
          'Content-Type': 'application/json'
        }
        
    });

    if (response.ok) {
        console.log(  name, location, specialty);
       
        document.location.replace('/');

    } else {
        alert(response.statusText);
        console.log('hit error in dash hbs')
    }
}


document.querySelector('.new-provider-form').addEventListener('submit', newFormHandler);
</script>
